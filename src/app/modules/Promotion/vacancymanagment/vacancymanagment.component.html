<app-shared-nav class="sharednav"[buttons]="buttons"></app-shared-nav>
<div class="col-md-11 main-body">
 
    <div class="card card-body">
<div class="container mt-5">
    <h5 class="text-center mb-4">Vacancy Management</h5>
    <button class="btn btnedit" (click)="toggleVacancyForm()">Add Vacancy</button>
  
    <!-- Vacancy Form (Initially Hidden) -->
    <div *ngIf="showVacancyForm" class="mt-4">
      <h6 class="mb-3">Add Vacancy</h6>
      <form (submit)="addVacancy()">
       
            <div class="card-body"> <div class="row"> 
              <div class="col-md-3 form-field">
                <input  placeholder="" type="text" name="title" [(ngModel)]="vacancy.title">
                <label>Title</label>
              </div>
                <div class="col-md-4 ml-5"> 
      
                <mat-form-field  style="width: 190px;height: 65px;"> 
                  <mat-label>Select Position</mat-label> 
                  <mat-select placeholder="Select Position" name="selectedPosition" required [(ngModel)]="selectedPosition"> 
                    <mat-option *ngFor="let position of positions" [value]="position.positionId"> 
                      {{ position.description }} 
                    </mat-option> 
                  </mat-select> 
                </mat-form-field> 
              </div> 
              <div class="col-md-4 ">
                <mat-form-field style="height: 65px; width:160px" class="example-full-width">
                  <mat-label>Release Date</mat-label> <input matInput [matDatepicker]="fromPicker" placeholder=" " name="from" [(ngModel)]="vacancy.releaseDate">
                 
                  <mat-datepicker-toggle matSuffix [for]="fromPicker"></mat-datepicker-toggle>
                  <mat-datepicker #fromPicker></mat-datepicker>
                </mat-form-field>
              </div>
              <div class="card-body"> <div class="row"> <div class="col-md-3 form-field ">
                <textarea  placeholder="" type="text" name="requirement" [(ngModel)]="vacancy.requirement"></textarea>
                <label>Requirements for the position</label>
              </div>
            
              <div class="col-md-4 ml-5"> 
                <mat-form-field style="height: 65px; width:190px"  > 
                  <mat-label>Select Grade</mat-label> 
                  <mat-select placeholder="Select Grade Level" name="selectedGrade" required [(ngModel)]="selectedGrade"> 
                    <mat-option *ngFor="let grade of grades" [value]="grade.levelId"> 
                      {{ grade.description }} 
                    </mat-option> 
                  </mat-select> 
                </mat-form-field> 
              </div> 
              <div class="col-md-4 ">
                  <mat-form-field style="height: 65px; width:160px" class="example-full-width">
                       <mat-label>Deadline</mat-label>  <input matInput [matDatepicker]="toPicker" placeholder=" " name="to" [(ngModel)]="vacancy.deadline">
               
                    <mat-datepicker-toggle matSuffix [for]="toPicker"></mat-datepicker-toggle>
                    <mat-datepicker #toPicker></mat-datepicker>
                  </mat-form-field>
                </div>
            </div></div></div>
            <div class="card-body">
              <div class="row">
                
                
              </div>
            </div>
          </div>
          
          <div><button  type="submit"class="btn btn-sm btnsave" *ngIf="vacancy.id===undefined" (click)="addVacancy()">
            <mat-icon>add</mat-icon>Add</button>
     </div>
               <!-- <button mat-raised-button type="submit" class="btn btn-danger pull-right">Save vacancy</button>
           -->
          <div *ngIf="vacancySaved" class=" btndanger btn-sm pull-right">
            Added successfully!
          </div>


          <button type="button" class="btn btn-sm btnsave" *ngIf="vacancy.id!=undefined"(click)="updatevacancy()">Update</button>
     
        <!-- <button mat-raised-button type="submit" class="btn btn-danger pull-right">Save vacancy</button> -->

      <div *ngIf="vacancyUpdated" class=" btndanger btn-sm pull-right">
        Updated successfully!
      </div>
      </form>
    </div>
  
    <!-- Vacancy Table -->
    <h6 class="mt-4">Vacancies</h6>
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>Title</th>
          <th>Deadline</th>
          <th>Release Date</th>
          <th>Position</th>
          <th>Grade</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let vacancy of vacancies">
          <td>{{ vacancy.title }}</td>
          <td>{{ vacancy.deadline }}</td>
          <td>{{ vacancy.releaseDate }}</td>
          <td>{{ vacancy.positionId }}</td>
          <td>{{ vacancy.levelId }}</td>
        </tr>
      </tbody>
    </table>
  </div>
 </div></div> 