<app-shared-nav [buttons]="buttons"></app-shared-nav>
<div class="main-content">
  <div class="container-fluid">
    <div class="row">

      <!-- First Column -->
      <div class="col-md-11 ml-5">
        <div class="card mb-5">
          <div class="">
            <div class="card-header ">
              <h4 class="card-title">Leave Balance</h4>
            </div>
            <div class="container">
                    

  
    <table  *ngIf="leaveBalance"  class="table col-md-8 table-bordered table-striped compact-table" >
      <thead> 
         <tr><td><button class="btn btn-sm btndanger" (click)="addLeaveBalancesForSelectedEmployees()">
            <mat-icon>perm_data_setting</mat-icon> Generate </button></td></tr> 
        <tr>
        
          <th>Unregistered Employees</th>
          
  
        </tr>
      </thead>
      <tbody>
        <!-- Use *ngFor to loop through the leaveBalances array and display each employee position -->
        <tr *ngFor="let emp of selectedEmployee"  >
            <td>{{emp.firstName }}</td>
            <td>{{emp.middleName }}</td>
            <td>{{emp.lastName }}</td>
          
        </tr>
       
      </tbody>
    </table>
    <p *ngIf="!(selectedEmployee.length || selectedEmployee.length)">No Unregistered Leave Balance found</p>
            </div>
          </div>
        
   
  <div class="card-body ">
            <input class="search" type="search" placeholder="Search Employee..." [(ngModel)]="searchTerm" (input)="onSearch()">
          </div>
      <!-- Second Column -->
    
            <p>Annual Leave Balance</p>
    <table  *ngIf="leaveBalance"  class="table-responsive table table-bordered table-striped table-sm compact-table" >
      <thead>
        <tr>
        
          <th>Employee</th>
          <th>Annual Start Date</th>
          <th>Annual End Date</th> 
          <th>Annual Default</th>
          <th>Annual Remainig</th>
          <th>Previous Annual</th>
          <th>Previous Two Year</th>

     

          <th>UnusedDays</th>

         
  
        </tr>
      </thead>
      <tbody>
        <!-- Use *ngFor to loop through the leaveBalances array and display each employee position -->
        <tr *ngFor="let leaveBalance of filteredLeaveBalances"  >
            <td>{{ getEmployeeName( leaveBalance.empId) }}</td> 
              <td>{{ leaveBalance.startDate| date:'yyyy-MM-dd' }}</td>
          <td>{{ leaveBalance.endDate| date:'yyyy-MM-dd' }}</td>
          <td>{{ leaveBalance.annualDefaultBalance }}</td>
          <td>{{ leaveBalance.annualRemainingBalance }}</td>
          <td>{{ leaveBalance.previousYearAnnualBalance }}</td>
          <td>{{ leaveBalance.previousTwoYear }}</td>

          <td>{{ leaveBalance.UnusedDays }}</td>

          <td>      <button class="btn btn-sm btnedit" (click)="openLeaveDetailsModal(leaveBalance.empId)" [ngStyle]="{'font-size': '12px', 'padding': '4px 8px'}">
            <mat-icon>edit</mat-icon>
          </button></td>
      
         
        </tr>
      </tbody>
    </table>
    <p *ngIf="!(filteredLeaveBalances.length || leaveBalances.length)">No Leave Balance found</p>



    <p>Other Leave Balance</p>
    <div style="overflow-x: auto; ">
            <table  *ngIf="otherleaveBalances"  class="table table-responsive table-bordered table-striped  table-sm compact-table" >
              <thead>
                <tr  >
                
                  <th scope="col">Employee</th>
                  <th scope="col">Sick Leave Default</th>
                  <th scope="col">Sick Leave Remainig</th>
                  <th scope="col">Sick LeaveStart Date</th>
                  <th scope="col">Sick Leave End Date</th> 
                  <th scope="col">Marraige Leave Default</th>
                  <th scope="col">Marraige Leave Remainig</th>
                  <th scope="col">Paternity Leave Default</th>
                  <th scope="col">Paternity Leave Remainig</th>
                  <th scope="col">Maternity Leave Default</th>
                  <th scope="col">Maternity Leave Remainig</th>
                  <th scope="col">compasionate Leave Default</th>
                  <th scope="col">compasionate Leave Remainig</th>
                  <th scope="col">Education Leave Default</th>
                  <th scope="col">Education Leave Remainig</th>
                  <th scope="col">LeaveWithOutPay Default</th>
                  <th scope="col">LeaveWithOutPay Remainig</th>
                  <th scope="col">Court Leave Default</th>
                  <th scope="col">Court Leave  Remainig</th>
                  <th scope="col">Abortion Leave Default</th>
                  <th scope="col">Abortion Leave  Remainig</th>
                </tr>
              </thead>
              <tbody>
                <!-- Use *ngFor to loop through the leaveBalances array and display each employee position -->
                <tr *ngFor="let otherLeaveBalance of filteredotherLeaveBalances"  >
                    <td>{{ getEmployeeName( otherLeaveBalance.empId) }}</td> 
                     
                  <td>{{ otherLeaveBalance.sickDefaultBalance }}</td>
                  <td>{{ otherLeaveBalance.sickRemainingBalance }}</td>
                  <td>{{ otherLeaveBalance.startDate| date:'yyyy-MM-dd' }}</td>
                  <td>{{ otherLeaveBalance.endDate| date:'yyyy-MM-dd' }}</td>
         
                  <td>{{ otherLeaveBalance.marriageDefaultBalance }}</td>
                  <td>{{ otherLeaveBalance.marriageRemainingBalance}}</td>
                  
                  <td>{{ otherLeaveBalance.paternityDefaultBalance}}</td>
                  <td>{{ otherLeaveBalance.paternityRemainingBalance}}</td>
              
                    <td>{{ otherLeaveBalance.maternityDefaultBalance}}</td>
             
                      <td>{{ otherLeaveBalance.maternityRemainingBalance}}</td>
                      <td>{{ otherLeaveBalance.compassinateDefaultBalance}}</td>
        
                      <td>{{ otherLeaveBalance.compassinateRemainingBalance}}</td>
                      <td>{{ otherLeaveBalance.educationDefaultBalance}}</td>
                      <td>{{ otherLeaveBalance.educationRemainingBalance}}</td>
                      <td>{{ otherLeaveBalance.leaveWotPayDefaultBalance}}</td>
                      <td>{{ otherLeaveBalance.leaveWotPayRemainingBalance}}</td>
                      <td>{{ otherLeaveBalance.courtLeaveDefaultBalance}}</td>
                      <td>{{ otherLeaveBalance.courtLeaveRemainingBalance}}</td>
                      <td>{{ otherLeaveBalance.abortionLeaveDefaultBalance}}</td>
                      <td>{{ otherLeaveBalance.abortionLeaveRemainingBalance}}</td>
                   
                 <td>      <button class="btn btn-sm btnedit" (click)="openOtherLeaveDetailsModal(otherLeaveBalance.empId)"[ngStyle]="{'font-size': '12px', 'padding': '4px 8px'}">
                  <mat-icon>edit</mat-icon>
                </button></td>
                </tr>
              </tbody>
            </table>
            <p *ngIf="!(filteredotherLeaveBalances.length || otherleaveBalances.length)">No Leave Balance found</p>
          </div>
          </div>

        </div>
      </div>
      </div>

    </div>
  

  