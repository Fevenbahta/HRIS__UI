<app-shared-nav  [buttons]="buttons"></app-shared-nav><div class="main-content  ">
    <div class="container-fluid ">
  <div class="row  ">
    <div class="col-md-3 pt-5 ">
      <app-min-nav></app-min-nav>
    </div>
            <div class="col-md-8 ">
              <div class="card  mb-5">
              <div class="card">
                  <div class="card-header cardhead">
                      <h4 class="card-title">Job Detail</h4>
                      <p class="card-category">Complete your Job Description</p>
                  </div>
                  <div class="card-body">
                      <form (ngSubmit)="updateEmployeePosition()">
                          
                      
                              <div class="card-body">
                              <div class="row">
                              <div class="col-md-6">
                               
                                  
                                  <mat-select class="form-control" placeholder="Select Division" name="selectedDivision" required [(ngModel)]="selectedDivision">
                                    <!-- Use *ngFor on mat-option to loop through departments -->
                                    <mat-option *ngFor="let division of divisions" [value]="division.divisionId">
                                      {{division.description}}
                                    </mat-option>
                                  </mat-select>
                               
                              </div>
                              
                             
                              <div class="col-md-6">
                                
                                  
                                  <mat-select class="form-control" placeholder="Select Position" required name="selectedPosition" [(ngModel)]="selectedPosition" >
                                    <!-- Replace the options below with your actual division options -->
                                    <mat-option *ngFor="let position of positions" [value]="position.positionId">
                                      {{position.name}}
                                    </mat-option>
                                   
                                  </mat-select>
                               
                              </div>
                              
                            </div>
                          </div>
                          <div class="card-body">
                          <div class="row">
                                     <div class="col-md-6">
                                      
                                      
                                        <mat-select class="form-control" placeholder="Select Step" name="selectedStep" required [(ngModel)]="selectedStep" >
                                          <!-- Replace the options below with your actual division options -->
                                          <mat-option *ngFor="let step of steps" [value]="step.id">
                                            {{step.description}}
                                          </mat-option>
                                         
                                     
                                        </mat-select>
                                     
                                    </div>
                                    
                                    <div class="col-md-6">
                                      
                                       
                                        <mat-select class="form-control" placeholder="Select Branch" name="selectedBranch" required [(ngModel)]="selectedBranch" >
                                          <!-- Replace the options below with your actual division options -->
                                          <mat-option *ngFor="let branch of branches" [value]="branch.id">
                                            {{branch.name}}
                                          </mat-option>
                                         
                                     
                                        </mat-select>
                                    
                                    </div>
                             </div>       
             </div>
             <div class="col-md-6">
              <mat-form-field>
                <mat-label>Joined Date</mat-label>
                <input matInput [matDatepicker]="picker" placeholder="Choose a date" required name="joinedDate" [(ngModel)]="employeePosition.startDate" >
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
              </mat-form-field>
              
            </div>
                          <button  mat-raised-button type="submit" class="btn btn-sm btnsave" >update</button>
                          <div class="clearfix"></div>
                          <!-- <div *ngIf="employeePositionUpdated" class="alert alert-success mt-3">
                           Job Description added successfully!
                          </div> -->
                      </form>
                  </div>
              </div>
              <!-- jobdescription.component.html -->
  
  <div class="container">
    <h6>Job Descriptions</h6>
    <table class="table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Division</th>
          <th>Position</th>
          <th>Step</th>
          <th>Branch</th>
          <th>Status</th>
          <th>Start Date</th>
          <th>End Date</th>
        </tr>
      </thead>
      <tbody>
        <!-- Use *ngFor to loop through the employeepositions array and display each employee position -->
        <tr *ngFor="let employeePosition of employeePositions">
          <td>{{ employeePosition.id }}</td>
          <td>{{ getDivisionName(employeePosition.divisionId) }}</td>
          <td>{{ getPositionName(employeePosition.position) }}</td>
          <td>{{ getStepName(employeePosition.stepId) }}</td>
          <td>{{ getBranchName(employeePosition.branchId) }}</td>
          <td>{{ employeePosition.status }}</td>
          <td>{{ employeePosition.startDate }}</td>
          <td>{{ employeePosition.endDate }}</td>
          <td>
            <button class="btn btn-sm btn-primary" (click)="editEmployeePosition(employeePosition)">Edit</button>
            <button class="btn btn-sm btn-danger" (click)="deleteEmployeePosition(employeePosition)">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  
          </div>
         
      </div>
  </div>
  
  